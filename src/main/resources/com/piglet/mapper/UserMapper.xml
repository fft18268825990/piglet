<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.piglet.mapper.UserMapper">    <select id="userList" resultType="com.piglet.domain.User">        SELECT        u.user_id as userId,        u.username as username,        u.password as password,        u.realname as realname,        u.phone as phone,        u.state as state,        u.create_time as createTime        FROM user u        <where>            u.del_flag = 0            <if test="state != null and state !=''">and u.state = #{state}</if>            <if test="username != null and username != ''">and u.username = #{username}</if>            <if test="password != null and password != ''">and u.password = #{password}</if>        </where>        ORDER BY u.create_time desc        <if test="offset != null and limit != null">            limit ${offset}, ${limit}        </if>    </select>    <select id="userCount" resultType="java.lang.Integer">        SELECT        count(*)        FROM user u        <where>            u.del_flag = 0            <if test="state != null and state !=''">and u.state = #{state}</if>            <if test="username != null and username != ''">and u.username = #{username}</if>            <if test="password != null and password != ''">and u.password = #{password}</if>        </where>    </select>    <update id="edit" parameterType="java.util.Map">        update user SET        <if test="flag == 'editUser'">realname = #{realname},phone = #{phone}</if>        <if test="flag == 'banUser'">state = #{state}</if>        <if test="flag == 'delUser'">del_flag = 1</if>        <if test="flag == 'editPwd'">password = #{newpass}</if>        where user_id = #{userId}    </update>    <select id="countlist" resultType="java.util.HashMap">        select u.realname,count(p.product_id) as pcount from user u        left join product p on u.user_id = p.create_person        <where>            u.del_flag = 0 and  p.del_flag = 0            <if test="startTime != null and startTime != ''"> and p.create_time &gt;= #{startTime} </if>            <if test="endTime != null and endTime != ''"> and p.create_time &lt;= #{endTime} </if>        </where>        GROUP BY u.realname    </select>    <select id="icount" parameterType="java.lang.Integer" resultType="int">        select count(*) from product p where p.create_person = #{userId} and date_format(p.create_time,'%Y-%m')=date_format(now(),'%Y-%m')    </select></mapper>